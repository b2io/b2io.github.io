<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Regex - Replace with Groups</title>

    <link href="//netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/blog.css">

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.9/gist-embed.min.js"></script>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-26131818-3']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>

  <body>
    <div class="wrapper">
      <header>
        <h3><a href="/blog">blog.base2.io</a></h3>

        <p>We are <a href="/">Base Two</a>, a technology company in Columbus, OH.</p>
      </header>

      <section>
        <div class="post post-full">
  <h2>
    <small>May 13, 2015 &ndash; Tony Borres</small>
    <a href="/2015/05/13/regex-replace-with-groups/" title="Regex - Replace with Groups" rel="bookmark" class="title">Regex - Replace with Groups</a>
  </h2>

  <div class="content">
    <p>I was recently confronted with a situation that required me to search and replace my code in a way that the left and right of my search needed to be replaced, but the middle needed to remain the same. Could this be done with a single search and replace?</p>

<!-- #REST#BEGIN -->

<h3 id="the-problem">The Problem</h3>

<p>For reasons that I do not care to detail here, I found myself needing to replace every instance of my Visual Studio solution where a <code class="highlighter-rouge">template</code> line matching</p>

<div class="highlighter-rouge"><pre class="highlight"><code>template: require('Project/DynamicComponentName/DynamicComponentName.html')
</code></pre>
</div>

<p>is replaced with a <code class="highlighter-rouge">templateUrl</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code>templateUrl: 'Project/DynamicComponentName/DynamicComponentName.html'
</code></pre>
</div>

<p>In this example the DynamicComponentName is different in every instance.</p>

<p>Rather than manually identifying every template line and make the necessary changes I wanted to do a single search and replace and be done with it. Regex felt like the right answer, but how?</p>

<h3 id="regex-groups">Regex Groups</h3>

<p>Regex, or regular expressions, is a very powerful (read as: “complicated to use and understand”) pattern matching grammar. It provides for more advanced searching capabilities than a standard text-base search. Luckily Visual Studio provides for searching via Regex (screenshot is of Visual Studio 2013).</p>

<p><img src="http://i.imgur.com/MAzCFjd.jpg" alt="Visual Studio regex search option" /></p>

<p>With <strong>Use Regular Expressions</strong> selected in Visual Studio we can take advantage of regex, including its group capturing via parentheses.</p>

<p>In the <strong>Find what</strong> we can place the following regex query</p>

<div class="highlighter-rouge"><pre class="highlight"><code>template: require\('Project/(.*)'\)

</code></pre>
</div>

<p>This tells Visual Studio to match everything that directly matches <code class="highlighter-rouge">template: require(Project/</code>&lt;any number of characters&gt;<code class="highlighter-rouge">)'</code>. Note that the require’s parentheses needed to be escaped with <code class="highlighter-rouge">\</code> because the parentheses are part of the regex syntax. You can use the <a href="http://www.regexr.com/">http://www.regexr.com/</a> online tool to test the regex matcher on your own.</p>

<p>Now if we place the following in the <strong>Replace with</strong> field we’ll be able to place the contents captured by the <code class="highlighter-rouge">(.*)</code> capture group using the <code class="highlighter-rouge">$</code> syntax.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>templateUrl: 'Project$1'

</code></pre>
</div>

<p>The contents of the capture group will be placed in the <code class="highlighter-rouge">$1</code> slot. If you had more than one capture group then you would simply increment the <code class="highlighter-rouge">$</code> (<code class="highlighter-rouge">$1</code>, <code class="highlighter-rouge">$2</code>, etc) based on the order that the capture groups appeared in the search term.</p>

<p>Now hit <strong>Replace</strong> for each instance and you’re good to go.</p>

<p>In my situation I really wanted to use <strong>Replace All</strong>, but Visual Studio 2013 seems to have an issue with Replace All using regex. Using Replace All results in Visual Studio stating that it cannot find any matches. <a href="https://www.youtube.com/watch?v=VDrW7sc52Ck&amp;feature=youtu.be&amp;t=48">Silly Visual Studio</a>.</p>

<!-- #REST#END -->

  </div>

  
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'b2io';
    var disqus_identifier = '/2015/05/13/regex-replace-with-groups/';
    var disqus_url = 'http://blog.base2.io/2015/05/13/regex-replace-with-groups/';
    var disqus_title = 'Regex - Replace with Groups';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
  
</div>
      </section>

      <footer>
        <p>Powered by <a href="http://pages.github.com/">Github Pages</a>, <a href="https://github.com/orderedlist/minimal">Minimal</a>, <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a>, and the questionable writing skills of our otherwise lovely staff.</p>

        <p><a href="http://feeds.feedburner.com/b2io" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a>&nbsp;<a href="http://feeds.feedburner.com/b2io" rel="alternate" type="application/rss+xml"></a></p>
      </footer>
    </div>

    <script src="/assets/js/scale.fix.js"></script>
  </body>
</html>